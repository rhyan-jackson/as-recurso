<%= turbo_frame_tag "modal-content" do %>
  <div class="modal-header">
    <h1><%= @station.name %></h1>
    <button data-action="click->modal#close" class="close-button">&times;</button>
  </div>

  <div class="station-details">
    <div class="station-info">
      <h2>Informações da Estação</h2>
      <p><strong>Localização:</strong> <%= @station.county.name %></p>
      <p><strong>Coordenadas:</strong> <%= @station.latitude %>, <%= @station.longitude %></p>
      <p><strong>Capacidade Máxima:</strong> <%= @station.max_capacity %> bicicletas</p>
      <p><strong>Bicicletas Disponíveis:</strong> <%= @available_bikes.count %></p>
    </div>

    <% if @bike_types.any? %>
      <div class="bike-types-section">
        <h2>Tipos de Bicicletas Disponíveis</h2>
        
        <div class="bike-types-grid">
          <% @bike_types.each do |bike_type| %>
            <div class="bike-type-card">
              <div class="bike-type-header">
                <h3><%= bike_type[:brand] %></h3>
                <span class="availability-badge">
                  <%= bike_type[:count] %> disponíve<%= bike_type[:count] > 1 ? 'is' : 'l' %>
                </span>
              </div>
              
              <div class="bike-type-details">
                <p><strong>Preço:</strong> <%= bike_type[:price] %>€/hora</p>
                <p><strong>Estado:</strong> 
                  <span class="status-badge status-available">Disponível</span>
                </p>
              </div>
              
              <div class="bike-type-actions">
                <%= link_to "Alugar #{bike_type[:brand]}", 
                    stations_path(mode: 'select_destination', origin: @station.id, brand: bike_type[:brand]),
                    class: "btn btn-success",
                    data: { action: "click->modal#close" } %>
                <%= link_to "Reservar", 
                    new_station_reservation_path(@station, brand: bike_type[:brand]), 
                    class: "btn btn-warning" %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% else %>
      <div class="no-bikes">
        <h2>Sem Bicicletas Disponíveis</h2>
        <p>Não há bicicletas disponíveis nesta estação no momento.</p>
        <p>Tente noutra estação ou volte mais tarde.</p>
      </div>
    <% end %>
  </div>
<% end %>