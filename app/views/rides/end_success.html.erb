<%= turbo_frame_tag "modal-content" do %>
  <div class="modal-header">
    <h1>ğŸ‰ Viagem ConcluÃ­da!</h1>
    <button data-action="click->modal#close" class="close-button">&times;</button>
  </div>

  <div class="trip-completed">
    <div class="success-message">
      <h2>âœ… Obrigado por usar eBUGA!</h2>
      <p>A sua viagem foi concluÃ­da com sucesso.</p>
    </div>
    
    <div class="trip-final-summary">
      <h3>ğŸ“Š Resumo Final</h3>
      
      <div class="summary-grid">
        <div class="summary-item">
          <strong>ğŸš´â€â™€ï¸ Bicicleta:</strong>
          <span><%= @ride.bike.brand %> #<%= @ride.bike.id %></span>
        </div>
        
        <div class="summary-item">
          <strong>ğŸ“ Percurso:</strong>
          <span><%= @ride.origin_station.name %> â†’ <%= @destination_station.name %></span>
        </div>
        
        <div class="summary-item">
          <strong>â±ï¸ DuraÃ§Ã£o:</strong>
          <span><%= @ride.duration %> minutos</span>
        </div>
        
        <div class="summary-item">
          <strong>ğŸ›£ï¸ DistÃ¢ncia:</strong>
          <span><%= number_with_precision(@ride.origin_station.distance_to(@destination_station), precision: 1) %> km</span>
        </div>
        
        <div class="summary-item">
          <strong>ğŸ’° Custo total:</strong>
          <span><%= (@ride.price + @additional_cost).round(2) %>â‚¬</span>
        </div>
        
        <div class="summary-item">
          <strong>ğŸ’³ Saldo restante:</strong>
          <span><%= Current.user.customer.balance %>â‚¬</span>
        </div>
      </div>
      
      <% if @additional_cost > 0 %>
        <div class="additional-charges">
          <p><small>Inclui <%= @additional_cost.round(2) %>â‚¬ de custos adicionais por tempo extra.</small></p>
        </div>
      <% end %>
    </div>
    
    <div class="bike-status">
      <h3>ğŸ”’ Estado da Bicicleta</h3>
      <p>A bicicleta <strong><%= @ride.bike.brand %> #<%= @ride.bike.id %></strong> foi deixada na estaÃ§Ã£o <strong><%= @destination_station.name %></strong> e estÃ¡ agora disponÃ­vel para outros utilizadores.</p>
    </div>
    
    <div class="success-actions">
      <%= link_to "ğŸ—ºï¸ Iniciar Nova Viagem", stations_path, 
          class: "btn btn-success btn-large", 
          data: { action: "click->modal#close" } %>
      <%= link_to "ğŸ  Voltar ao InÃ­cio", root_path, 
          class: "btn btn-primary",
          data: { action: "click->modal#close" } %>
      <%= link_to "ğŸ“„ Ver HistÃ³rico", "#", 
          class: "btn btn-secondary",
          data: { action: "click->modal#close" } %>
    </div>
  </div>
<% end %>